
# üåê Angular HTTP Module

## üîπ Simple Definition

* The **HttpClientModule** in Angular allows the application to **communicate with remote servers over HTTP**.
* It is used to **make HTTP requests** such as GET, POST, PUT, DELETE, etc., and **receive responses**.
* It returns **Observables** from RxJS, making it easy to handle asynchronous data streams.

---

## üîπ Key Points

* Angular HTTP module is part of `@angular/common/http`.
* Requires **importing `HttpClientModule`** in `AppModule`.
* Provides **HttpClient service** to make HTTP calls.
* Supports **interceptors** to handle request/response globally.
* Supports **request headers, query parameters, error handling, and type safety**.
* Works seamlessly with **RxJS operators** (`map`, `catchError`, `tap`).

---

## üîπ Setup

```ts
// app.module.ts
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import { HttpClientModule } from '@angular/common/http';

@NgModule({
  declarations: [AppComponent],
  imports: [
    BrowserModule,
    HttpClientModule // Import HttpClientModule
  ],
  bootstrap: [AppComponent]
})
export class AppModule {}
```

---

## üîπ Usage Example

### 1. **GET Request**

```ts
// user.service.ts
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({ providedIn: 'root' })
export class UserService {
  private apiUrl = 'https://jsonplaceholder.typicode.com/users';

  constructor(private http: HttpClient) {}

  getUsers(): Observable<any[]> {
    return this.http.get<any[]>(this.apiUrl);
  }
}
```

```ts
// component.ts
users: any[] = [];

constructor(private userService: UserService) {}

ngOnInit() {
  this.userService.getUsers().subscribe(data => {
    this.users = data;
  });
}
```

```html
<ul>
  <li *ngFor="let user of users">{{ user.name }}</li>
</ul>
```

---

### 2. **POST Request**

```ts
addUser(user: any): Observable<any> {
  return this.http.post(this.apiUrl, user);
}
```

---

### 3. **PUT Request**

```ts
updateUser(userId: number, user: any): Observable<any> {
  return this.http.put(`${this.apiUrl}/${userId}`, user);
}
```

---

### 4. **DELETE Request**

```ts
deleteUser(userId: number): Observable<any> {
  return this.http.delete(`${this.apiUrl}/${userId}`);
}
```

---

## üîπ Headers & Params Example

```ts
const headers = { 'Authorization': 'Bearer token123' };
const params = { page: '1', limit: '10' };

this.http.get(this.apiUrl, { headers, params }).subscribe();
```

---

## üîπ Error Handling with RxJS

```ts
import { catchError } from 'rxjs/operators';
import { throwError } from 'rxjs';

this.http.get(this.apiUrl)
  .pipe(
    catchError(error => {
      console.error('Error:', error);
      return throwError(error);
    })
  ).subscribe();
```

---

## üîπ Interceptors Example

```ts
// auth.interceptor.ts
import { Injectable } from '@angular/core';
import { HttpInterceptor, HttpRequest, HttpHandler } from '@angular/common/http';

@Injectable()
export class AuthInterceptor implements HttpInterceptor {
  intercept(req: HttpRequest<any>, next: HttpHandler) {
    const clonedReq = req.clone({
      headers: req.headers.set('Authorization', 'Bearer token123')
    });
    return next.handle(clonedReq);
  }
}
```

```ts
// app.module.ts
providers: [
  { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }
]
```

‚úÖ **Effect:** All outgoing HTTP requests automatically include the Authorization header.

---

## üîπ Diagram

```
Component
   |
   v
UserService (HttpClient)
   |
   v
HTTP Request -> Server
   |
   v
Server Response -> Observable
   |
   v
Component subscribes and renders data
```

---

## üîπ Real-life Use Cases

* **Gmail:** Fetch emails via API (`GET`), send email (`POST`).
* **Jira:** Get project issues, update tickets (`PUT`), delete tasks (`DELETE`).
* **E-commerce:** Load products (`GET`), add to cart (`POST`), update order status (`PUT`).
* **Interceptors:** Add Auth token to all requests, handle global errors, loading spinners.

---